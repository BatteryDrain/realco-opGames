LINKS = ["https://store.steampowered.com/app/3417410/Storebound/https://store.steampowered.com/app/3417410/Storebound/",
    "https://store.steampowered.com/app/3179350/Long_Drive_North_CoOp_RV_Simulator/",
    "https://store.steampowered.com/app/3044440/Gas_Station_Manager/",
    "https://store.steampowered.com/app/3198850/Play_Together/",
    "https://store.steampowered.com/app/1431300/Sand/",
    "https://store.steampowered.com/app/1133870/Space_Engineers_2/",
    "https://store.steampowered.com/app/1833200/DuneCrawl/",
    "https://store.steampowered.com/app/1931180/Lost_Skies/",
    "https://store.steampowered.com/app/2909110/Nuclear_Nightmare/",
    "https://store.steampowered.com/app/3241660/REPO/",
    "https://store.steampowered.com/app/2192380/Begone_Beast/",
    "https://store.steampowered.com/app/2681030/Outbound/",
    "https://store.steampowered.com/app/2977620/Squirreled_Away/",
    "https://store.steampowered.com/app/1641960/Forever_Skies/",
    "https://store.steampowered.com/app/1757300/Jump_Ship/",
    "https://store.steampowered.com/app/1631270/StarRupture/",
    "https://store.steampowered.com/app/3079190/PACS__Post_Apocalypse_Courier_Service_Coop_Delivery_Simulator/",
    "https://store.steampowered.com/app/2929250/over_the_hill/",
    "https://store.steampowered.com/app/1172710/Dune_Awakening/",
    "https://store.steampowered.com/app/905340/Heave_Ho/",
    "https://store.steampowered.com/app/418530/Spelunky_2/",
    "https://store.steampowered.com/app/661940/Regular_Human_Basketball/",
    "https://store.steampowered.com/app/2644470/PICO_PARK_2/",
    "https://store.steampowered.com/app/303590/Hidden_in_Plain_Sight/",
    "https://store.steampowered.com/app/2708450/Oh_Deer/",
    "https://store.steampowered.com/app/1962700/Subnautica_2",
    "https://store.steampowered.com/app/3113750/Drunk_Builder_Simulator/",
    "https://store.steampowered.com/app/2780980/LOCKDOWN_Protocol/",
    "https://store.steampowered.com/app/1601330/Survival_Machine/",
    "https://store.steampowered.com/app/236390/War_Thunder/",
    "https://store.steampowered.com/app/2569760/The_Mound_Omen_of_Cthulhu/",
    "https://store.steampowered.com/app/1172620/Sea_of_Thieves_2025_Edition/",
    "https://store.steampowered.com/app/2698870/Midnight_Murder_Club/",
    "https://store.steampowered.com/app/3041230/Crosswind/",
    "https://store.steampowered.com/app/2820700/A_Gentlemens_Dispute/",
    "https://store.steampowered.com/app/2104890/RoadCraft/",
    "https://store.steampowered.com/app/1660080/Aloft/",
    "https://store.steampowered.com/app/2842150/Pair_A_Dice/",
    "https://store.steampowered.com/app/2253100/Everwind/",
    "https://store.steampowered.com/app/1084600/My_Time_at_Sandrock/",
    "https://store.steampowered.com/app/2592220/CUFFBUST/",
    "https://store.steampowered.com/app/1017180/The_Long_Drive/",
    "https://store.steampowered.com/app/3558400/Backseat_Drivers/",
    "https://store.steampowered.com/app/2852700/BUS_Bro_u_Survived/",
    "https://store.steampowered.com/app/934700/Dead_Island_2/",
    "https://store.steampowered.com/app/2551020/Onearmed_robber/",
    "https://store.steampowered.com/app/2879840/Escape_Simulator_2/",
    "https://store.steampowered.com/app/2788040/Another_Try_2/",
    "https://store.steampowered.com/app/1966720/Lethal_Company/",
    "https://store.steampowered.com/app/1509230/Prop_Hunt/",
    "https://store.steampowered.com/app/4000/Garrys_Mod/",
    "https://store.steampowered.com/app/3164500/Schedule_I/",
    "https://store.steampowered.com/app/1211020/Wobbly_Life/",
    "https://store.steampowered.com/app/648800/Raft/",
    "https://store.steampowered.com/app/2881650/Content_Warning/",
    "https://store.steampowered.com/app/3097560/Liars_Bar/",
    "https://store.steampowered.com/app/3041140/Golf_With_Your_Friends__Olympus_Odyssey_Course/",
    "https://store.steampowered.com/app/3419130/Deadly_Quiet/",
    "https://store.steampowered.com/app/2827200/MIMESIS/"
    ];
NAMES = [["Storebound", 1, 0, 0, 0, "nf"],
    ["Long Drive North", 1, 0, 0, 1, "nf"],
    ["Gas Station Manager", 1, 1, 0, 2, "nf"],
    ["Play Together", 1, 1, 0, 3, "f"],
    ["SAND", 1, 0, 0, 4, "nf"],
    ["Space Engineers 2", 1, 0, 0, 5, "nf"],
    ["DuneCrawl", 1, 0, 0, 6, "nf"],
    ["Lost Skies", 1, 0, 0, 7, "nf"],
    ["Nuclear Nightmare", 1, 0, 0, 8, "nf"],
    ["REPO", 1, 0, 0, 9, "nf"],
    ["Begone Beast", 1, 0, 0, 10, "nf"],
    ["Outbound", 1, 0, 0, 11, "nf"],
    ["Squirreled Away", 1, 0, 0, 12, "nf"],
    ["Forever Skies", 1, 0, 0, 13, "nf"],
    ["Jump Ship", 1, 0, 0, 14, "nf"],
    ["StarRupture", 1, 0, 0, 15, "nf"],
    ["PACS", 1, 0, 0, 16, "nf"],
    ["over the hill", 1, 0, 0, 17, "nf"],
    ["Dune Awakening", 1, 0, 0, 18, "nf"],
    ["Heave Ho", 1, 1, 0, 19, "nf"],
    ["Spelunky 2", 1, 0, 0, 20, "nf"],
    ["Regular Human Basketball", 1, 1, 1, 21, "nf"],
    ["PICO PARK 2", 1, 1, 0, 22, "nf"],
    ["Hidden in Plain Sight", 1, 1, 1, 23, "nf"],
    ["Oh Deer", 1, 0, 0, 24, "nf"],
    ["Subnautica 2", 1, 0, 0, 25, "nf"],
    ["Drunk Builder Simulator", 1, 0, 0, 26, "nf"],
    ["LOCKDOWN Protocol", 1, 0, 0, 27, "nf"],
    ["Survival Machine", 1, 0, 0, 28, "nf"],
    ["War Thunder", 1, 1, 1, 29, "f"],
    ["The Mound: Omen of Cthulhu", 1, 1, 1, 30, "nf"],
    ["Sea of Thieves", 1, 0, 0, 31, "nf"],
    ["Midnight Murder Club,", 1, 0, 0, 32, "nf"],
    ["Crosswind", 1, 0, 0, 33, "nf"],
    ["A Gentlemen's Dispute", 1, 1, 0, 34, "nf"],
    ["RoadCraft", 1, 0, 0, 35, "nf"],
    ["Aloft", 1, 0, 0, 36, "nf"],
    ["Pair A Dice", 1, 0, 0, 37, "f"],
    ["Everwind", 1, 0, 0, 38, "nf"],
    ["My Time at sandrock", 1, 0, 0, 39, "nf"],
    ["CUFFBUST", 1, 0, 0, 40, "nf"],
    ["The Long Drive", 1, 0, 0, 41, "nf"],
    ["Backseat Drivers", 1, 0, 0, 42, "nf"],
    ["BUS: Bro u Survived", 1, 0, 0, 43, "nf"],
    ["Dead Island 2", 1, 0, 0, 44, "nf"],
    ["One-armed robber", 1, 0, 0, 45, "f"],
    ["Escape Simulator 2", 1, 0, 0, 46, "nf"],
    ["Another Try 2", 1, 0, 0, 47, "nf"],
    ["Lethal Company", 1, 0, 0, 48, "nf"],
    ["Prop Hunt", 1, 0, 0, 49, "nf"],
    ["Garry's Mod", 1, 1, 1, 50, "nf"],
    ["Schedule I", 1, 0, 0, 51, "nf"],
    ["Wobbly Life", 1, 0, 0, 52, "nf"],
    ["Raft", 1, 0, 0, 53, "nf"],
    ["Content Warning", 1, 0, 0, 54, "nf"],
    ["Liar's Bar", 1, 0, 0, 55, "nf"],
    ["Golf With Your Friends", 1, 1, 1, 56, "nf"],
    ["Deadly Quiet", 1, 0, 0, 57, "nf"],
    ["MIMESIS", 1, 0, 0, 58, "nf"]
    ]; // name, windows, apple, linux, link/picture/status index, free? ("f","nf")
NAMESAZ = [["Aloft", 1, 0, 0, 36, "nf"],
    ["Another Try 2", 1, 0, 0, 47, "nf"],
    ["A Gentlemen's Dispute", 1, 1, 0, 34, "nf"],
    ["Badlands crew", 1, 0, 0, 41, "nf"],
    ["Backseat Drivers", 1, 0, 0, 42, "nf"],
    ["Begone Beast", 1, 0, 0, 10, "nf"],
    ["BUS: Bro u Survived", 1, 0, 0, 43, "nf"],
    ["Crosswind", 1, 0, 0, 33, "nf"],
    ["Content Warning", 1, 0, 0, 54, "nf"],
    ["CUFFBUST", 1, 0, 0, 40, "nf"],
    ["Dead Island 2", 1, 0, 0, 44, "nf"],
    ["Deadly Quiet", 1, 0, 0, 57, "nf"],
    ["Drunk Builder Simulator", 1, 0, 0, 26, "nf"],
    ["Dune Awakening", 1, 0, 0, 18, "nf"],
    ["DuneCrawl", 1, 0, 0, 6, "nf"],
    ["Escape Simulator 2", 1, 0, 0, 46, "nf"],
    ["Everwind", 1, 0, 0, 38, "nf"],
    ["Forever Skies", 1, 0, 0, 13, "nf"],
    ["Garry's Mod", 1, 1, 1, 50, "nf"],
    ["Gas Station Manager", 1, 1, 0, 2, "nf"],
    ["Golf With Your Friends", 1, 1, 1, 56, "nf"],
    ["Heave Ho", 1, 1, 0, 19, "nf"],
    ["Hidden in Plain Sight", 1, 1, 1, 23, "nf"],
    ["Jump Ship", 1, 0, 0, 14, "nf"],
    ["Lethal Company", 1, 0, 0, 48, "nf"],
    ["Liar's Bar", 1, 0, 0, 55, "nf"],
    ["LOCKDOWN Protocol", 1, 0, 0, 27, "nf"],
    ["Long Drive North", 1, 0, 0, 1, "nf"],
    ["Lost Skies", 1, 0, 0, 7, "nf"],
    ["Midnight Murder Club,", 1, 0, 0, 32, "nf"],
    ["MIMESIS", 1, 0, 0, 58, "nf"],
    ["My Time at sandrock", 1, 0, 0, 39, "nf"],
    ["Nuclear Nightmare", 1, 0, 0, 8, "nf"],
    ["Oh Deer", 1, 0, 0, 24, "nf"],
    ["One-armed robber", 1, 0, 0, 45, "f"],
    ["Outbound", 1, 0, 0, 11, "nf"],
    ["over the hill", 1, 0, 0, 17, "nf"],
    ["PACS", 1, 0, 0, 16, "nf"],
    ["Pair A Dice", 1, 0, 0, 37, "f"],
    ["PICO PARK 2", 1, 1, 0, 22, "nf"],
    ["Play Together", 1, 1, 0, 3, "f"],
    ["Prop Hunt", 1, 0, 0, 49, "nf"],
    ["Raft", 1, 0, 0, 53, "nf"],
    ["Regular Human Basketball", 1, 1, 1, 21, "nf"],
    ["REPO", 1, 0, 0, 9, "nf"],
    ["RoadCraft", 1, 0, 0, 35, "nf"],
    ["SAND", 1, 0, 0, 4, "nf"],
    ["Schedule I", 1, 0, 0, 51, "nf"],
    ["Sea of Thieves", 1, 0, 0, 31, "nf"],
    ["Space Engineers 2", 1, 0, 0, 5, "nf"],
    ["Spelunky 2", 1, 0, 0, 20, "nf"],
    ["Squirreled Away", 1, 0, 0, 12, "nf"],
    ["StarRupture", 1, 0, 0, 15, "nf"],
    ["Storebound", 1, 0, 0, 0, "nf"],
    ["Subnautica 2", 1, 0, 0, 25, "nf"],
    ["Survival Machine", 1, 0, 0, 28, "nf"],
    ["The Mound: Omen of Cthulhu", 1, 1, 1, 30, "nf"],
    ["War Thunder", 1, 1, 1, 29, "f"],
    ["Wobbly Life", 1, 0, 0, 52, "nf"]
    ]; // name, windows, apple, linux, link/picture/status index, free? ("f","nf")
IMGS = ["assets/storebound.jpg",
    "assets/longdriven.jpg",
    "assets/gasstation.jpg",
    "assets/PlayTogether.jpg",
    "assets/sand.jpg",
    "assets/space.jpg",
    "assets/DuneCrawl.jpg",
    "assets/lostskys.jpg",
    "assets/nnightmare.jpg",
    "assets/repo.jpg",
    "assets/beast.jpg",
    "assets/outbound.jpg",
    "assets/Squirreled.jpg",
    "assets/ForeverSkies.jpg",
    "assets/JumpShip.jpg",
    "assets/starrapture.jpg",
    "assets/pacs.jpg",
    "assets/overthehill.jpg",
    "assets/Duneawakening.jpg",
    "assets/HeaveHo.jpg",
    "assets/Spelunky.jpg",
    "assets/RegularHumanBasketball.jpg",
    "assets/PICOPARK.jpg",
    "assets/HiddeninPlainSight.jpg",
    "assets/OhDeer.jpg",
    "assets/Subnautica2.jpg",
    "assets/DrunkBuilderSimulator.jpg",
    "assets/LOCKDOWNProtocol.jpg",
    "assets/SurvivalMachine.jpg",
    "assets/WarThunder.jpg",
    "assets/TheMoundOmenofCthulhu.jpg",
    "assets/SeaofThieves.jpg",
    "assets/MidnightMurderClub.jpg",
    "assets/crosswind.jpg",
    "assets/aGentlemensDispute.jpg",
    "assets/RoadCraft.jpg",
    "assets/Aloft.jpg",
    "assets/PairADice.jpg",
    "assets/Everwind.jpg",
    "assets/Mytimeatsandrock.jpg",
    "assets/CUFFBUST.jpg",
    "assets/TheLongDrive.jpg",
    "assets/BackseatDrivers.jpg",
    "assets/BUS-BrouSurvived.jpg",
    "assets/DeadIsland2.jpg",
    "assets/One-armedrobber.jpg",
    "assets/EscapeSimulator2.jpg",
    "assets/AnotherTry2.jpg",
    "assets/LethalCompany.jpg",
    "assets/PropHunt.jpg",
    "assets/GMod.jpg",
    "assets/ScheduleI.jpg",
    "assets/WobblyLife.jpg",
    "assets/Raft.jpg",
    "assets/ContentWarning.jpg",
    "assets/LiarBar.jpg",
    "assets/Golf.jpg",
    "assets/deadlyQuiet.jpg",
    "assets/MIMESIS.jpg"
    ];
STATUS = ["coming",
    "coming ex",
    "full",
    "full",
    "coming ex",
    "ex",
    "coming",
    "ex",
    "ex",
    "ex",
    "ex",
    "coming",
    "demo",
    "ex",
    "coming ex",
    "coming ex",
    "coming ex",
    "none",
    "ex",
    "full",
    "full",
    "full",
    "full",
    "full",
    "full",
    "coming",
    "full",
    "ex",
    "coming",
    "full",
    "coming",
    "full",
    "ex",
    "coming",
    "demo",
    "coming",
    "ex",
    "coming",
    "coming ex",
    "full",
    "coming",
    "full",
    "demo",
    "demo",
    "full",
    "full",
    "demo",
    "ex",
    "full",
    "full",
    "full",
    "demo",
    "ex",
    "full",
    "full",
    "full",
    "full",
    "coming"
    ];
    NUMPLAYERS =[ [1,4],
        [1,4],
        [1,8],
        [1,"infinity"],
        [1,6],
        [1,"infinity"],
        [1,4],
        [1,6],
        [1,8],
        [1,6],
        [1,4],
        [1,4],
        [1,4],
        [1,3],        
        [1,4],        
        [1,4],        
        [1,4],        
        [1,4],        
        [1,"infinity"],        
        [1,4],
        [1,4],
        [2,10],
        [2,8],
        [2,4],
        [1,5],
        [1,"?"],
        [2,5],
        [3,8],
        [1,4],
        [1,"infinity"],
        [1,4],
        [1,4],
        [1,6],
        [1,"infinity"],
        [1,8],
        [1,4],
        [1,8],
        [1,"infinity"],
        [1,4],
        [1,4],
        [1,10],
        [1,"infinity"],
        [2],
        [1,4],
        [1,3],
        [1,4],
        [1,8],
        [1,"infinity"],
        [1,4],
        [2,16],
        [1,"infinity"],
        [2,4],
        [1,"infinity"],
        [1,"infinity"],
        [2,4],
        [2,4],
        [1,12],
        [1,4],
        [1,4]
    ];
COUNT = 0;
GAMEID = [];
ICONS = ["assets/Windows.svg.png","assets/Apple_white.svg.png","assets/linux-white-logo.png","assets/null.png"];
SYSTEM = "all";
let FIGURES = [];
FREEFILTER = "false";
FILTER = "all";
MOUSEX = 0;
MOUSEY = 0;
DARKMODE = true;
EXPANDED = false;
SORTBY = "date";
DELAY = 40;

const games = document.getElementById("games");

function clearf(){
    SORTBY = sorting.value;
    Iwanttosortby();
    filter.value = "all";
    FILTER = "all";

    sselect.value = "all";
    SYSTEM = "all";

    freeonly.checked = false;
    FREEFILTER = "off";
    setcount();

    iconIndicator.src = "assets/null.png";
    //sort();
}

freeonly.addEventListener("change", () => {
    FREEFILTER = freeonly.checked;
    console.log(FREEFILTER);
    sort();
    setcount();
});

clearb.addEventListener("click", () => {
    clearf();
});

Iwanttosortby();
sorting.addEventListener("change", () => {
    clearf();
    setcount();
});

function Iwanttosortby(){
    if(SORTBY == "a-z"){
        games.innerHTML = "";

        for (let i = 0; i < NAMES.length; i++) {
            setTimeout((index) => figBuilderAZ(index), i * DELAY, i);
        }
    }
    if(SORTBY == "date"){
        games.innerHTML = "";

        for (let i = 0; i < NAMES.length; i++) {
            setTimeout((index) => figBuilderdate(index), i * DELAY, i);
        }
    }
}

function figBuilderAZ(i){
    fig = document.createElement('figure');
    fig.setAttribute("data-stat", STATUS[NAMESAZ[i][4]]);
    fig.setAttribute("data-windows", NAMESAZ[i][1]);
    fig.setAttribute("data-apple", NAMESAZ[i][2]);
    fig.setAttribute("data-linux", NAMESAZ[i][3]);
    fig.setAttribute("data-free", NAMESAZ[i][5]);

    title = document.createElement('figcaption');
    title.innerHTML = NAMESAZ[i][0];
    fig.appendChild(title);
    //console.log(NAMESAZ[i][0]);

    image = document.createElement('img');
    image.src = IMGS[NAMESAZ[i][4]];
    image.alt = "picture of " + NAMESAZ[i][0] + " gameplay or thumbnail";
    fig.appendChild(image);

    div1 = document.createElement('div');
    div1.id = "div1";

    but = document.createElement('button');
    but.innerHTML = "learn more";
    but.setAttribute("onclick", "goToLink(" + NAMESAZ[i][4] + ")");
    div1.appendChild(but);

    if(STATUS[NAMESAZ[i][4]] == "demo"){
        DEMO = document.createElement('img');
        DEMO.id = "demoimg";
        DEMO.src = "assets/DEMO.webp";
        DEMO.alt = "yellow rouned rectange with the word DEMO taken out of it";
        div1.appendChild(DEMO);
    }
    if(NAMESAZ[i][5] == "f"){
        FREE = document.createElement('img');
        FREE.id = "freeimg";
        FREE.src = "assets/FREEgreen.webp";
        div1.appendChild(FREE);
    }
    fig.appendChild(div1);

    div = document.createElement('div');
    div.classList.add("icon-container");
    for(j = 1; j < 4; j++){
        if(NAMESAZ[i][j] === 1){
            supimg = document.createElement('img');
            supimg.src = ICONS[j - 1];
            supimg.alt = "Platform Icon";
            div.classList.add("icon");
            div.appendChild(supimg);
        }
    }
    fig.appendChild(div);

    div = document.createElement('div');
    div.classList.add("playernumber");
    p = document.createElement('p');
    if(NUMPLAYERS[i][1] == null){
        p.textContent= NUMPLAYERS[i][0] + " players";
    }
    else{
        p.textContent= NUMPLAYERS[i][0] + " - " + NUMPLAYERS[i][1] + " players";
    }
    div.appendChild(p);
    fig.appendChild(div);

    div = document.createElement('div');
    p = document.createElement('p');
    if(STATUS[NAMESAZ[i][4]] == "full"){
        p.textContent = null;
    }
    div.appendChild(p);
    fig.appendChild(div);

    games.appendChild(fig);

    if((i + 1) == NAMESAZ.length){
        setFigures();
        setcount();
    }
}


function figBuilderdate(i){
    fig = document.createElement('figure');
    fig.setAttribute("data-stat", STATUS[NAMES[i][4]]);
    fig.setAttribute("data-windows", NAMES[i][1]);
    fig.setAttribute("data-apple", NAMES[i][2]);
    fig.setAttribute("data-linux", NAMES[i][3]);
    fig.setAttribute("data-free", NAMES[i][5]);

    title = document.createElement('figcaption');
    title.innerHTML = NAMES[i][0];
    fig.appendChild(title);
    //console.log(NAMES[i][0]);

    image = document.createElement('img');
    image.src = IMGS[NAMES[i][4]];
    image.alt = "picture of " + NAMES[i][0] + " gameplay or thumbnail";
    fig.appendChild(image);

    div1 = document.createElement('div');
    div1.id = "div1";

    but = document.createElement('button');
    but.innerHTML = "learn more";
    but.setAttribute("onclick", "goToLink(" + NAMES[i][4] + ")");
    div1.appendChild(but);

    if(STATUS[NAMES[i][4]] == "demo"){
        DEMO = document.createElement('img');
        DEMO.id = "demoimg";
        DEMO.src = "assets/DEMO.webp";
        div1.appendChild(DEMO);
    }
    if(NAMES[i][5] == "f"){
        FREE = document.createElement('img');
        FREE.id = "freeimg";
        FREE.src = "assets/FREEgreen.webp";
        div1.appendChild(FREE);
    }
    fig.appendChild(div1);

    div = document.createElement('div');
    div.classList.add("icon-container");
    for(j = 1; j < 4; j++){
        if(NAMES[i][j] === 1){
            supimg = document.createElement('img');
            supimg.src = ICONS[j - 1];
            supimg.alt = "Platform Icon";
            div.classList.add("icon");
            div.appendChild(supimg);
        }
    }
    fig.appendChild(div);

    div = document.createElement('div');
    div.classList.add("playernumber");
    p = document.createElement('p');
    if(NUMPLAYERS[i][1] == null){
        p.textContent= NUMPLAYERS[i][0] + " players";
    }
    else{
        p.textContent= NUMPLAYERS[i][0] + " - " + NUMPLAYERS[i][1] + " players";
    }
    div.appendChild(p);
    fig.appendChild(div);

    div = document.createElement('div');
    p = document.createElement('p');
    if(STATUS[NAMESAZ[i][4]] == "full"){
        p.textContent = null;
    }
    div.appendChild(p);
    fig.appendChild(div);

    games.appendChild(fig);

    if((i + 1) == NAMES.length){
        setFigures();
        setcount();
    }
}




function goToLink(number){
    console.log("button " + number + " clicked");
    window.open(LINKS[number],"_blank");
}

function setFigures(){
    FIGURES = document.querySelectorAll("figure");
    console.log(FIGURES);
}
const filter = document.getElementById("filter");

sselect.addEventListener("change", () => {
    SYSTEM = sselect.value;
    console.log(SYSTEM);
    sort();
    if(SYSTEM == "all"){
        iconIndicator.src = ICONS[3];
    }
    if(SYSTEM == "linux"){
        iconIndicator.src = ICONS[2];
    }
    if(SYSTEM == "apple"){
        iconIndicator.src = ICONS[1];
    }
    if(SYSTEM == "windows"){
        iconIndicator.src = ICONS[0];
    }
    setcount();
});

filter.addEventListener("change", () => {
    FILTER = filter.value;
    console.log(FILTER);
    sort();
    setcount();
});

function sort(){
    //set all to show
    for(i = 0; i < FIGURES.length; i++){
        if(FIGURES[i].classList.contains("hide")){
            FIGURES[i].classList.toggle("hide");
        }
    }
    //filter
    if(FILTER != "all"){
        for(i = 0; i < FIGURES.length; i++){
            if(FIGURES[i].dataset.stat != FILTER){
                FIGURES[i].classList.toggle("hide");
            }
        }
    }

    if(SYSTEM == "linux"){
        for(i = 0; i < FIGURES.length; i++){
            if(FIGURES[i].dataset.linux == "0" && !FIGURES[i].classList.contains("hide")){
                FIGURES[i].classList.toggle("hide");
            }
        }
    }

    if(SYSTEM == "apple"){
        for(i = 0; i < FIGURES.length; i++){
            if(FIGURES[i].dataset.apple == "0" && !FIGURES[i].classList.contains("hide")){
                FIGURES[i].classList.toggle("hide");
            }
        }
    }

    if(SYSTEM == "windows"){
        for(i = 0; i < FIGURES.length; i++){
            if(FIGURES[i].dataset.windows == "0" && !FIGURES[i].classList.contains("hide")){
                FIGURES[i].classList.toggle("hide");
            }
        }
    }
    if(FREEFILTER == true){
        for(i = 0; i < FIGURES.length; i++){
            if(FIGURES[i].dataset.free == "nf" && !FIGURES[i].classList.contains("hide")){
                FIGURES[i].classList.toggle("hide");
            }
        }
    }
}

darkmode.addEventListener("change", () => {
    if(DARKMODE){
        DARKMODE = false;
        document.body.style.backgroundColor = "white";
        darkmodelab.innerHTML = "dark mode:";
    }
    else{
        DARKMODE = true;
        document.body.style.backgroundColor = "black";
                darkmodelab.innerHTML = "light mode:";
    }

});

expand.addEventListener("click", function(){
    exheader();
});

window.addEventListener("scroll", () => {
    if(EXPANDED){
        exheader();
    }
});

function headshowhide(){
    filter.classList.toggle("hide");
    filterlab.classList.toggle("hide");
    sselect.classList.toggle("hide");
    sselectlab.classList.toggle("hide");
    iconIndicator.classList.toggle("hide");
    sorting.classList.toggle("hide");
    sortinglab.classList.toggle("hide");
    clearb.classList.toggle("hide");
    freeonly.classList.toggle("hide");
    freeonlylab.classList.toggle("hide");
}

function exheader(){
    header.classList.toggle("expanded");
    if(EXPANDED){
        expand.innerHTML = "show filters";
        headshowhide();
        EXPANDED = false;
        setcount();
    }
    else{
        expand.innerHTML = "hide filters";
        setTimeout(headshowhide(), 1000);
        EXPANDED = true;
    }
}

function getPrices(gameid) {
    const proxyURL = "https://cors-anywhere.herokuapp.com/";
    const apiURL = "https://store.steampowered.com/api/appdetails?appids=" + gameid + "&cc=ca&filters=price_overview";

    fetch(proxyURL + apiURL)
        .then(response => {
            if (!response.ok) {
                throw new Error("Network response was not OK");
            }
            console.log(data);
            return response.json();
        })
        .then(data => {
            console.log(data);
            return data[gameid].data.is_free;
        })
        .catch(error => {
            console.error("Error:", error);
        });
}

// function getPrices(gameid){
//     apiURL = "https://store.steampowered.com/api/appdetails?appids=" + gameid;
//     fetch(apiURL)
//         .then(response => {
//             if(!response.ok) {
//                 throw new Error("Network response was not OK");
//             }
//             return response.json();
//         })
//         .then(data => {
//             console.log(data);
//             var Lprice = data;
//             console.log(Lprice.discount_percent);
//             return(gameid.is_free);
//         })
//         .catch(error => {
//             console.error("Error:", error);
//         });
// }

for(i = 0; i < LINKS.length; i++){
    tempLink = LINKS[i];
    temp = "";
    for(index = 35; index < 43; index++){
        letter = tempLink.substr(index,1);
        if(letter !== "/"){
            temp += letter;
        }
    }
    GAMEID.push(temp);
}
// for(i = 0; i < PRICE.length; i++){

// }

function setcount(){
    COUNT = FIGURES.length
    for(i = 0; i < FIGURES.length; i++){
        if(FIGURES[i].classList.contains("hide")){
            COUNT--
        }
    }
    count.innerHTML=COUNT;
}